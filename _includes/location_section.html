<section class="section section--location" id="location" aria-label="Venue and Location">
  <div class="section__content">
    <article class="section__article">
      <div class="col--1-2 col--sm-100">
        <h3>The Venue</h3>
        <div class="location-super-text" aria-label="Das MuTh Theatre">DAS MUTH</div>
        <div class="location-super-text">THEATRE</div>

        <p class="section__article__text mb--2">
          <a href="https://muth.at/en/the-theatre/" target="_blank" class="text--primary">Das MuTh</a> theatre is one of the most modern concert halls in Vienna, fully accessible and located next to the beautiful <a href="https://en.wikipedia.org/wiki/Augarten" target="_blank" class="text--primary">Augarten</a> park. Specifically developed for a 400-seat auditorium, the acoustic has a quality and clarity normally heard in smaller-scale concert halls and opera houses, and is greatly appreciated by audience and artists alike.
        </p>

        <h3>Location</h3>
        <p class="section__article__text mb--2">
          <a href="https://muth.at/en/contact/#anfahrt" target="_blank" class="text--primary">Am Augartenspitz 1, 1020 Vienna, Austria</a>.
        </p>
      </div>
      <div class="col--1-2 col--sm-100">
        <div class="section__article__slider">
          <div class="slider" role="region" aria-label="Venue image gallery">
            <div class="slider__inner">
              <div class="slider__item is-showing" id="slide_1" role="group" aria-roledescription="slide" aria-label="Slide 1 of 3">
                <img src="/assets/images/slides/slide_1.jpg" alt="Das MuTh concert hall interior view 1" loading="lazy" />
              </div>
              <div class="slider__item is-hidden" id="slide_2" role="group" aria-roledescription="slide" aria-label="Slide 2 of 3">
                <img src="/assets/images/slides/slide_2.jpg" alt="Das MuTh concert hall interior view 2" loading="lazy" />
              </div>
              <div class="slider__item is-hidden" id="slide_3" role="group" aria-roledescription="slide" aria-label="Slide 3 of 3">
                <img src="/assets/images/slides/slide_3.jpg" alt="Das MuTh concert hall interior view 3" loading="lazy" />
              </div>
            </div>
            <div class="slider__controls" role="tablist" aria-label="Slide controls">
              <button onClick="showSlideOne()" class="slider__control is-active" id="slider_button_1" role="tab" aria-selected="true" aria-label="Show slide 1"></button>
              <button onClick="showSlideTwo()" class="slider__control" id="slider_button_2" role="tab" aria-selected="false" aria-label="Show slide 2"></button>
              <button onClick="showSlideThree()" class="slider__control" id="slider_button_3" role="tab" aria-selected="false" aria-label="Show slide 3"></button>
            </div>
          </div>
        </div>
      </div>
    </article>
  </div>
</section>
<script type="text/javascript">
  var currentSlide = 1;
  var totalSlides = 3;
  var isScrolling = false;

  function updateSliderAriaStates(activeIndex) {
    for (var i = 1; i <= totalSlides; i++) {
      var button = document.getElementById('slider_button_' + i);
      if (button) {
        button.setAttribute('aria-selected', i === activeIndex ? 'true' : 'false');
      }
    }
  }

  function showSlide(index) {
    if (index < 1) index = totalSlides;
    if (index > totalSlides) index = 1;
    
    currentSlide = index;
    
    for (var i = 1; i <= totalSlides; i++) {
      var slide = document.getElementById('slide_' + i);
      var button = document.getElementById('slider_button_' + i);
      
      if (i === index) {
        removeElementClass('slide_' + i, 'is-hidden');
        setElementClass('slide_' + i, 'is-showing');
        setElementClass('slider_button_' + i, 'is-active');
      } else {
        setElementClass('slide_' + i, 'is-hidden');
        removeElementClass('slide_' + i, 'is-showing');
        removeElementClass('slider_button_' + i, 'is-active');
      }
    }
    updateSliderAriaStates(index);
  }

  function nextSlide() {
    showSlide(currentSlide + 1);
  }

  function prevSlide() {
    showSlide(currentSlide - 1);
  }

  function showSlideOne() { showSlide(1); }
  function showSlideTwo() { showSlide(2); }
  function showSlideThree() { showSlide(3); }

  // Mouse wheel scrolling
  document.addEventListener('DOMContentLoaded', function() {
    var sliderElement = document.querySelector('.slider');
    
    if (sliderElement) {
      // Mouse wheel support
      sliderElement.addEventListener('wheel', function(e) {
        if (isScrolling) return;
        
        e.preventDefault();
        isScrolling = true;
        
        if (e.deltaY > 0 || e.deltaX > 0) {
          nextSlide();
        } else {
          prevSlide();
        }
        
        setTimeout(function() {
          isScrolling = false;
        }, 300);
      }, { passive: false });

      // Touch swipe support
      var touchStartX = 0;
      var touchStartY = 0;
      var touchEndX = 0;
      var touchEndY = 0;

      sliderElement.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
        touchStartY = e.changedTouches[0].screenY;
      }, { passive: true });

      sliderElement.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        touchEndY = e.changedTouches[0].screenY;
        handleSwipe();
      }, { passive: true });

      function handleSwipe() {
        var diffX = touchStartX - touchEndX;
        var diffY = touchStartY - touchEndY;
        
        // Only trigger if horizontal swipe is greater than vertical
        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
          if (diffX > 0) {
            nextSlide(); // Swipe left = next
          } else {
            prevSlide(); // Swipe right = prev
          }
        }
      }

      // Keyboard navigation when slider is focused
      sliderElement.setAttribute('tabindex', '0');
      sliderElement.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
          e.preventDefault();
          nextSlide();
        } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
          e.preventDefault();
          prevSlide();
        }
      });
    }
  });
</script>
